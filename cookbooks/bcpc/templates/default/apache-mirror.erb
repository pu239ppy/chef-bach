################################################
#
#              Generated by Chef
#
################################################
<%
  if Dir.exists?("/home/ubuntu/chef-bcpc/bins/")
    bin_dir="/home/ubuntu/chef-bcpc/bins/"
  elsif Dir.exists?("/home/vagrant/chef-bcpc/bins/") 
    bin_dir="/home/vagrant/chef-bcpc/bins/"
  else
    bin_dir="/var/www"
  end
%>

<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        DocumentRoot "<%= bin_dir %>"
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <%= "<Directory \"#{bin_dir}\">" %>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                <IfModule mod_version.c> 
                    <IfVersion < 2.3>
                        Order allow,deny
                        allow from all
                    </IfVersion>
                    <IfVersion > 2.3>
                        Require all granted
                    </IfVersion>
                </IfModule>
                <IfModule !mod_version.c> 
                    Order allow,deny
                    allow from all
                </IfModule>
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                <IfModule mod_version.c> 
                    <IfVersion < 2.3>
                        Order allow,deny
                        allow from all
                    </IfVersion>
                    <IfVersion > 2.3>
                        Require all granted
                    </IfVersion>
                </IfModule>
                <IfModule !mod_version.c> 
                    Order allow,deny
                    allow from all
                </IfModule>
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined

    <Directory /var/spool/apt-mirror/mirror/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        <IfModule mod_version.c> 
            <IfVersion < 2.3>
                Order allow,deny
                allow from all
            </IfVersion>
            <IfVersion > 2.3>
                Require all granted
            </IfVersion>
        </IfModule>
        <IfModule !mod_version.c> 
            Order allow,deny
            allow from all
        </IfModule>
    </Directory>

   Alias "/cluster-def/" "/home/vagrant/cluster/cluster.txt"
   <Directory "/home/vagrant/cluster">
       AllowOverride None
       Require all granted
       <Files "cluster.txt">
       </Files>
   </Directory>

</VirtualHost>
